dataDir = '/Volumes/Amir/results/';
% subDataDir = 'oct 17-18 testing FC+0-5 w: input whitening = true, 1D dist sampling, kernel normalization = false';
% subDataDir = 'oct 19-20 testing FC+0-5, input whitening = false, 1D dist sampling, kernel normalization = false';
% subDataDir = 'oct 25-26 testing FC+0-5 with input whitening = true, 1D dist sampling, kernel normalization = false';
% subDataDir = fullfile('oct 27-28 testing FC+0-5 with input whitening = true, comp rand weights, kernel normalization = false', 'batch 2');
subDataDir = 'oct 28 testing FC+0-5 without bottlenecks, comp rand weights, with weight decay';
epochNum = 50;
epochFile = sprintf('net-epoch-%d.mat', epochNum);
fprintf('Loading files...'); i = 1;

fc_plus_5 = load(fullfile(dataDir, subDataDir, 'cifar-alex-net-28-Oct-2016-18-24-19-GPU2', epochFile)); fprintf('\t%d', i); i = i + 1;
fc_plus_4 = load(fullfile(dataDir, subDataDir, 'cifar-alex-net-28-Oct-2016-20-45-27-GPU2', epochFile)); fprintf('\t%d', i); i = i + 1;
fc_plus_3 = load(fullfile(dataDir, subDataDir, 'cifar-alex-net-28-Oct-2016-22-55-57-GPU2', epochFile)); fprintf('\t%d', i); i = i + 1;
fc_plus_2 = load(fullfile(dataDir, subDataDir, 'cifar-alex-net-29-Oct-2016-00-30-16-GPU2', epochFile)); fprintf('\t%d', i); i = i + 1;
fc_plus_1 = load(fullfile(dataDir, subDataDir, 'cifar-alex-net-29-Oct-2016-01-51-34-GPU2', epochFile)); fprintf('\t%d', i); i = i + 1;
fc_only = load(fullfile(dataDir, subDataDir, 'cifar-alex-net-29-Oct-2016-03-03-51-GPU2', epochFile)); fprintf('\t%d', i); i = i + 1;
fprintf('\nDone!');

figure;
plot( ...
  1:1:epochNum, [fc_only.info.train.error(1,:)], ... % [fc_only.stats.train.top1err], ... .info.train.error
  1:1:epochNum, [fc_plus_1.info.train.error(1,:)], ... % [fc_plus_1.stats.train.top1err], ...
  1:1:epochNum, [fc_plus_2.info.train.error(1,:)], ... % [fc_plus_2.stats.train.top1err], ...
  1:1:epochNum, [fc_plus_3.info.train.error(1,:)], ... % [fc_plus_3.stats.train.top1err], ...
  1:1:epochNum, [fc_plus_4.info.train.error(1,:)], ... % [fc_plus_4.stats.train.top1err], ...
  1:1:epochNum, [fc_plus_5.info.train.error(1,:)], ... % [fc_plus_5.stats.train.top1err], ...
  'LineWidth', 2);
grid on
title('Effects of Varying BackProp Depth on Training Accuracy');
legend(...
  'training on FC ONLY', ...
  'training on FC + 1 blocks', ...
  'training on FC + 2 blocks', ...
  'training on FC + 3 blocks', ...
  'training on FC + 4 blocks', ...
  'training on FC + 5 blocks (FULL)');
xlabel('epoch')
ylabel('Training Error');

figure;
plot( ...
  1:1:epochNum, [fc_only.info.val.error(1,:)], ... % [fc_only.stats.val.top1err], ...
  1:1:epochNum, [fc_plus_1.info.val.error(1,:)], ... % [fc_plus_1.stats.val.top1err], ...
  1:1:epochNum, [fc_plus_2.info.val.error(1,:)], ... % [fc_plus_2.stats.val.top1err], ...
  1:1:epochNum, [fc_plus_3.info.val.error(1,:)], ... % [fc_plus_3.stats.val.top1err], ...
  1:1:epochNum, [fc_plus_4.info.val.error(1,:)], ... % [fc_plus_4.stats.val.top1err], ...
  1:1:epochNum, [fc_plus_5.info.val.error(1,:)], ... % [fc_plus_5.stats.val.top1err], ...
  'LineWidth', 2);
grid on
title('Effects of Varying BackProp Depth on Validation Accuracy');
legend(...
  'training on FC ONLY', ...
  'training on FC + 1 blocks', ...
  'training on FC + 2 blocks', ...
  'training on FC + 3 blocks', ...
  'training on FC + 4 blocks', ...
  'training on FC + 5 blocks (FULL)');
xlabel('epoch')
ylabel('Validation Error');
