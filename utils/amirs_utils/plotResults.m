dataDir = '/Volumes/Amir/matconvnet/data/';
% subDataDir = 'oct 17-18 testing FC+0-5 w: input whitening = true, 1D dist sampling, kernel normalization = false';
% subDataDir = 'oct 19-20 testing FC+0-5, input whitening = false, 1D dist sampling, kernel normalization = false';
subDataDir = 'oct 25-26 testing FC+0-5 with input whitening = true, 1D dist sampling, kernel normalization = false';
epochNum = 75;
epochFile = sprintf('net-epoch-%d.mat', epochNum);
fprintf('Loading files...'); i = 1;
fc_only = load(fullfile(dataDir, subDataDir, 'cifar-alex-net-26-Oct-2016-10-45-32-GPU1', epochFile)); fprintf('\t%d', i); i = i + 1;
fc_plus_1 = load(fullfile(dataDir, subDataDir, 'cifar-alex-net-26-Oct-2016-09-03-32-GPU1', epochFile)); fprintf('\t%d', i); i = i + 1;
fc_plus_2 = load(fullfile(dataDir, subDataDir, 'cifar-alex-net-26-Oct-2016-07-08-34-GPU1', epochFile)); fprintf('\t%d', i); i = i + 1;
fc_plus_3 = load(fullfile(dataDir, subDataDir, 'cifar-alex-net-26-Oct-2016-04-56-26-GPU1', epochFile)); fprintf('\t%d', i); i = i + 1;
fc_plus_4 = load(fullfile(dataDir, subDataDir, 'cifar-alex-net-26-Oct-2016-01-54-05-GPU1', epochFile)); fprintf('\t%d', i); i = i + 1;
fc_plus_5 = load(fullfile(dataDir, subDataDir, 'cifar-alex-net-25-Oct-2016-22-37-50-GPU1', epochFile)); fprintf('\t%d', i); i = i + 1;
fprintf('\nDone!');

figure;
plot( ...
  1:1:epochNum, [fc_only.stats.train.top1err], ...
  1:1:epochNum, [fc_plus_1.stats.train.top1err], ...
  1:1:epochNum, [fc_plus_2.stats.train.top1err], ...
  1:1:epochNum, [fc_plus_3.stats.train.top1err], ...
  1:1:epochNum, [fc_plus_4.stats.train.top1err], ...
  1:1:epochNum, [fc_plus_5.stats.train.top1err], ...
  'LineWidth', 2);
grid on
title('Effects of Varying BackProp Depth on Training Accuracy');
legend(...
  'training on FC ONLY', ...
  'training on FC + 1 blocks', ...
  'training on FC + 2 blocks', ...
  'training on FC + 3 blocks', ...
  'training on FC + 4 blocks', ...
  'training on FC + 5 blocks (FULL)');
xlabel('epoch')
ylabel('Training Error');

figure;
plot( ...
  1:1:epochNum, [fc_only.stats.val.top1err], ...
  1:1:epochNum, [fc_plus_1.stats.val.top1err], ...
  1:1:epochNum, [fc_plus_2.stats.val.top1err], ...
  1:1:epochNum, [fc_plus_3.stats.val.top1err], ...
  1:1:epochNum, [fc_plus_4.stats.val.top1err], ...
  1:1:epochNum, [fc_plus_5.stats.val.top1err], ...
  'LineWidth', 2);
grid on
title('Effects of Varying BackProp Depth on Validation Accuracy');
legend(...
  'training on FC ONLY', ...
  'training on FC + 1 blocks', ...
  'training on FC + 2 blocks', ...
  'training on FC + 3 blocks', ...
  'training on FC + 4 blocks', ...
  'training on FC + 5 blocks (FULL)');
xlabel('epoch')
ylabel('Validation Error');
